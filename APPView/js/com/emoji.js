var emojiJson = {
    "[微笑]" : "<img src='../wgtRes/emojicons/ace_emoji_1.png' class='emoji'>",
    "[憋嘴]" : "<img src='../wgtRes/emojicons/ace_emoji_2.png' class='emoji'>",
    "[色]" : "<img src='../wgtRes/emojicons/ace_emoji_3.png' class='emoji'>",
    "[发呆]" : "<img src='../wgtRes/emojicons/ace_emoji_4.png' class='emoji'>",
    "[得意]" : "<img src='../wgtRes/emojicons/ace_emoji_5.png' class='emoji'>",
    "[流泪]" : "<img src='../wgtRes/emojicons/ace_emoji_6.png' class='emoji'>",
    "[害羞]" : "<img src='../wgtRes/emojicons/ace_emoji_7.png' class='emoji'>",
    "[闭嘴]" : "<img src='../wgtRes/emojicons/ace_emoji_8.png' class='emoji'>",
    "[睡]" : "<img src='../wgtRes/emojicons/ace_emoji_9.png' class='emoji'>",
    "[大哭]" : "<img src='../wgtRes/emojicons/ace_emoji_10.png' class='emoji'>",
    "[尴尬]" : "<img src='../wgtRes/emojicons/ace_emoji_11.png' class='emoji'>",
    "[发怒]" : "<img src='../wgtRes/emojicons/ace_emoji_12.png' class='emoji'>",
    "[调皮]" : "<img src='../wgtRes/emojicons/ace_emoji_13.png' class='emoji'>",
    "[呲牙]" : "<img src='../wgtRes/emojicons/ace_emoji_14.png' class='emoji'>",
    "[惊讶]" : "<img src='../wgtRes/emojicons/ace_emoji_15.png' class='emoji'>",
    "[难过]" : "<img src='../wgtRes/emojicons/ace_emoji_16.png' class='emoji'>",
    "[酷]" : "<img src='../wgtRes/emojicons/ace_emoji_17.png' class='emoji'>",
    "[冷汗]" : "<img src='../wgtRes/emojicons/ace_emoji_18.png' class='emoji'>",
    "[抓狂]" : "<img src='../wgtRes/emojicons/ace_emoji_19.png' class='emoji'>",
    "[吐]" : "<img src='../wgtRes/emojicons/ace_emoji_20.png' class='emoji'>",
    "[偷笑]" : "<img src='../wgtRes/emojicons/ace_emoji_21.png' class='emoji'>",
    "[愉快]" : "<img src='../wgtRes/emojicons/ace_emoji_22.png' class='emoji'>",
    "[白眼]" : "<img src='../wgtRes/emojicons/ace_emoji_23.png' class='emoji'>",
    "[傲慢]" : "<img src='../wgtRes/emojicons/ace_emoji_24.png' class='emoji'>",
    "[饥饿]" : "<img src='../wgtRes/emojicons/ace_emoji_25.png' class='emoji'>",
    "[困]" : "<img src='../wgtRes/emojicons/ace_emoji_26.png' class='emoji'>",
    "[惊恐]" : "<img src='../wgtRes/emojicons/ace_emoji_27.png' class='emoji'>",
    "[流汗]" : "<img src='../wgtRes/emojicons/ace_emoji_28.png' class='emoji'>",
    "[憨笑]" : "<img src='../wgtRes/emojicons/ace_emoji_29.png' class='emoji'>",
    "[悠闲]" : "<img src='../wgtRes/emojicons/ace_emoji_30.png' class='emoji'>",
    "[奋斗]" : "<img src='../wgtRes/emojicons/ace_emoji_31.png' class='emoji'>",
    "[咒骂]" : "<img src='../wgtRes/emojicons/ace_emoji_32.png' class='emoji'>",
    "[疑问]" : "<img src='../wgtRes/emojicons/ace_emoji_33.png' class='emoji'>",
    "[嘘]" : "<img src='../wgtRes/emojicons/ace_emoji_34.png' class='emoji'>",
    "[晕]" : "<img src='../wgtRes/emojicons/ace_emoji_35.png' class='emoji'>",
    "[疯了]" : "<img src='../wgtRes/emojicons/ace_emoji_36.png' class='emoji'>",
    "[衰]" : "<img src='../wgtRes/emojicons/ace_emoji_37.png' class='emoji'>",
    "[骷髅]" : "<img src='../wgtRes/emojicons/ace_emoji_38.png' class='emoji'>",
    "[敲打]" : "<img src='../wgtRes/emojicons/ace_emoji_39.png' class='emoji'>",
    "[再见]" : "<img src='../wgtRes/emojicons/ace_emoji_40.png' class='emoji'>",
    "[擦汗]" : "<img src='../wgtRes/emojicons/ace_emoji_41.png' class='emoji'>",
    "[抠鼻]" : "<img src='../wgtRes/emojicons/ace_emoji_42.png' class='emoji'>",
    "[鼓掌]" : "<img src='../wgtRes/emojicons/ace_emoji_43.png' class='emoji'>",
    "[糗大了]" : "<img src='../wgtRes/emojicons/ace_emoji_44.png' class='emoji'>",
    "[坏笑]" : "<img src='../wgtRes/emojicons/ace_emoji_45.png' class='emoji'>",
    "[左哼哼]" : "<img src='../wgtRes/emojicons/ace_emoji_46.png' class='emoji'>",
    "[右哼哼]" : "<img src='../wgtRes/emojicons/ace_emoji_47.png' class='emoji'>",
    "[哈欠]" : "<img src='../wgtRes/emojicons/ace_emoji_48.png' class='emoji'>",
    "[鄙视]" : "<img src='../wgtRes/emojicons/ace_emoji_49.png' class='emoji'>",
    "[委屈]" : "<img src='../wgtRes/emojicons/ace_emoji_50.png' class='emoji'>",
    "[快哭了]" : "<img src='../wgtRes/emojicons/ace_emoji_51.png' class='emoji'>",
    "[阴险]" : "<img src='../wgtRes/emojicons/ace_emoji_52.png' class='emoji'>",
    "[亲亲]" : "<img src='../wgtRes/emojicons/ace_emoji_53.png' class='emoji'>",
    "[吓]" : "<img src='../wgtRes/emojicons/ace_emoji_54.png' class='emoji'>",
    "[可怜]" : "<img src='../wgtRes/emojicons/ace_emoji_55.png' class='emoji'>",
    "[菜刀]" : "<img src='../wgtRes/emojicons/ace_emoji_56.png' class='emoji'>",
    "[西瓜]" : "<img src='../wgtRes/emojicons/ace_emoji_57.png' class='emoji'>",
    "[啤酒]" : "<img src='../wgtRes/emojicons/ace_emoji_58.png' class='emoji'>",
    "[篮球]" : "<img src='../wgtRes/emojicons/ace_emoji_59.png' class='emoji'>",
    "[乒乓]" : "<img src='../wgtRes/emojicons/ace_emoji_60.png' class='emoji'>"
}
/*
 * 0.由于本人不想解析xml文件，所以新建了一个json对象保存emoji的文字（key）和对应图片地址（value），并保存到一个数组中去
 */
function initEmoji() {
    var jsonObject = {
        "[微笑]" : "../wgtRes/emojicons/ace_emoji_1.png",
        "[憋嘴]" : "../wgtRes/emojicons/ace_emoji_2.png",
        "[色]" : "../wgtRes/emojicons/ace_emoji_3.png",
        "[发呆]" : "../wgtRes/emojicons/ace_emoji_4.png",
        "[得意]" : "../wgtRes/emojicons/ace_emoji_5.png",
        "[流泪]" : "../wgtRes/emojicons/ace_emoji_6.png",
        "[害羞]" : "../wgtRes/emojicons/ace_emoji_7.png",
        "[闭嘴]" : "../wgtRes/emojicons/ace_emoji_8.png",
        "[睡]" : "../wgtRes/emojicons/ace_emoji_9.png",
        "[大哭]" : "../wgtRes/emojicons/ace_emoji_10.png",
        "[尴尬]" : "../wgtRes/emojicons/ace_emoji_11.png",
        "[发怒]" : "../wgtRes/emojicons/ace_emoji_12.png",
        "[调皮]" : "../wgtRes/emojicons/ace_emoji_13.png",
        "[呲牙]" : "../wgtRes/emojicons/ace_emoji_14.png",
        "[惊讶]" : "../wgtRes/emojicons/ace_emoji_15.png",
        "[难过]" : "../wgtRes/emojicons/ace_emoji_16.png",
        "[酷]" : "../wgtRes/emojicons/ace_emoji_17.png",
        "[冷汗]" : "../wgtRes/emojicons/ace_emoji_18.png",
        "[抓狂]" : "../wgtRes/emojicons/ace_emoji_19.png",
        "[吐]" : "../wgtRes/emojicons/ace_emoji_20.png",
        "[偷笑]" : "../wgtRes/emojicons/ace_emoji_21.png",
        "[愉快]" : "../wgtRes/emojicons/ace_emoji_22.png",
        "[白眼]" : "../wgtRes/emojicons/ace_emoji_23.png",
        "[傲慢]" : "../wgtRes/emojicons/ace_emoji_24.png",
        "[饥饿]" : "../wgtRes/emojicons/ace_emoji_25.png",
        "[困]" : "../wgtRes/emojicons/ace_emoji_26.png",
        "[惊恐]" : "../wgtRes/emojicons/ace_emoji_27.png",
        "[流汗]" : "../wgtRes/emojicons/ace_emoji_28.png",
        "[憨笑]" : "../wgtRes/emojicons/ace_emoji_29.png",
        "[悠闲]" : "../wgtRes/emojicons/ace_emoji_30.png",
        "[奋斗]" : "../wgtRes/emojicons/ace_emoji_31.png",
        "[咒骂]" : "../wgtRes/emojicons/ace_emoji_32.png",
        "[疑问]" : "../wgtRes/emojicons/ace_emoji_33.png",
        "[嘘]" : "../wgtRes/emojicons/ace_emoji_34.png",
        "[晕]" : "../wgtRes/emojicons/ace_emoji_35.png",
        "[疯了]" : "../wgtRes/emojicons/ace_emoji_36.png",
        "[衰]" : "../wgtRes/emojicons/ace_emoji_37.png",
        "[骷髅]" : "../wgtRes/emojicons/ace_emoji_38.png",
        "[敲打]" : "../wgtRes/emojicons/ace_emoji_39.png",
        "[再见]" : "../wgtRes/emojicons/ace_emoji_40.png",
        "[擦汗]" : "../wgtRes/emojicons/ace_emoji_41.png",
        "[抠鼻]" : "../wgtRes/emojicons/ace_emoji_42.png",
        "[鼓掌]" : "../wgtRes/emojicons/ace_emoji_43.png",
        "[糗大了]" : "../wgtRes/emojicons/ace_emoji_44.png",
        "[坏笑]" : "../wgtRes/emojicons/ace_emoji_45.png",
        "[左哼哼]" : "../wgtRes/emojicons/ace_emoji_46.png",
        "[右哼哼]" : "../wgtRes/emojicons/ace_emoji_47.png",
        "[哈欠]" : "../wgtRes/emojicons/ace_emoji_48.png",
        "[鄙视]" : "../wgtRes/emojicons/ace_emoji_49.png",
        "[委屈]" : "../wgtRes/emojicons/ace_emoji_50.png",
        "[快哭了]" : "../wgtRes/emojicons/ace_emoji_51.png",
        "[阴险]" : "../wgtRes/emojicons/ace_emoji_52.png",
        "[亲亲]" : "../wgtRes/emojicons/ace_emoji_53.png",
        "[吓]" : "../wgtRes/emojicons/ace_emoji_54.png",
        "[可怜]" : "../wgtRes/emojicons/ace_emoji_55.png",
        "[菜刀]" : "../wgtRes/emojicons/ace_emoji_56.png",
        "[西瓜]" : "../wgtRes/emojicons/ace_emoji_57.png",
        "[啤酒]" : "../wgtRes/emojicons/ace_emoji_58.png",
        "[篮球]" : "../wgtRes/emojicons/ace_emoji_59.png",
        "[乒乓]" : "../wgtRes/emojicons/ace_emoji_60.png",
    }
    return jsonObject;
}

/*
 * 1.获取表情对应的本地url
 */
function getEmojiLocalUrl(str) {

    var emoji = initEmoji();
    var emojiUrl = '-1';
    $.each(emoji, function(key, name) {

        if (key == str) {
            emojiUrl = name;
        }

    });

    return emojiUrl;

}

/*
 * 2.尝试把微笑转换为emoji地址, 并输出到页面上
 */
function isEmojiChar(str) {

    var result = new Array();
    var reg = /\[[^\x00-\xff]{1,10}\]/g;
    var substr = str.match(reg);
    for (var i = 0; i < substr.length; i++) {
        result.push(substr[i]);
    }
    debug(result);
    return result;

}

/*
 * 3.替换的逻辑
 */
function replaceEmojiChar(str) {

    var result = new Array();
    var reg = /\[[^\x00-\xff]{1,10}\]/g;
    var substr = str.match(reg);
    for (var i = 0; i < substr.length; i++) {
        result.push(substr[i]);
    }
    return result;

}

function trimText(str) {
    //return str.replace(/(\n|\r|(\r\n)|(\u0085)|(\u2028)|(\u2029))/g, "</br>");
    return str.replace(/(\n|\r|(\r\n)|(\u0085)|(\u2028)|(\u2029))/g, "");
}
